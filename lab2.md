# Lab2实验报告

lab2.c中，主要设置了页表，并处理了各种异常。


### 页表的设立
在v9-cpu中，有二级页表。其中每级页表共有1024项，每一项共有32bit，其中前20bit用于表示地址，最后12位用于表示page的各种属性,PTE_P代表该页有效。另外，页表的每一项都是内存对齐到4096的倍数的。

在具体实现中，一级页表只有前四项有值，分别指向四个二级页表。 同时，所有的页表都被初始化来实现对等映射。

最后，通过```PDIR```指令，把页表的首地址给予相应的寄存器中，并通过```SPAG```指令打开了页表。

###异常的处理

在trap函数中，我们可以从栈上拿到异常的错误码，对应于具体实现中的fc变量。根据fc变量，我们就可以确定当前的异常是什么样的异常，并据此进行处理。
